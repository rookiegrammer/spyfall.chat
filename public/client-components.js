"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function toggleFullscreen(e){var t=document.documentElement;e instanceof HTMLElement&&(t=e);var a=document.webkitIsFullScreen||document.mozFullScreen||!1;t.requestFullScreen=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen||function(){return!1},document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen||function(){return!1},a?document.exitFullscreen():t.requestFullScreen()}var _createClass=function(){function s(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}}(),memoji=["😑","😀","😗","😍","🧐","🤓"],MessageBox=function(e){function a(e){_classCallCheck(this,a);var c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));c.setOwner=function(e){c.setState({owner:e})},c.handleMessage=function(e){var t=c.state.messages.concat(e);c.setState({messages:t})},c.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;c.setState(_defineProperty({},s,a))},c.messageBox=function(){var e=[];if(c.state.messages)for(var t=0;t<c.state.messages.length;t++){var a=c.state.messages[t],s=a.to==c.state.owner,n="msg-outbound",o="To: "+a.to;s&&(n="msg-inbound",o="From: "+a.from);var r=React.createElement("span",{className:"uk-label uk-margin-small-left uk-margin-small-right"},o);e.push(React.createElement("div",{className:n,key:t},s?"":r,React.createElement("div",{className:"msg-wrapper uk-margin-small-top"},a.text),s?r:""))}return e},c.loginDialog=function(){var e=React.createElement("div",{className:"uk-alert-danger uk-padding","uk-alert":!0},React.createElement("a",{className:"uk-alert-close","uk-close":!0}),"You still need to ",React.createElement("a",{className:"uk-link-reset",href:"/signin"},React.createElement("u",null,"login")),"."),t=React.createElement("span",{className:"uk-label"},"Logged in as ",c.state.owner);return null===c.state.owner?e:t},c.connectMessage=function(){c.socket.emit("open message",c.setOwner)},c.sendMessage=function(){var t={event:0,from:c.state.owner,to:c.state.username,text:c.state.message,date:null};c.socket.emit("send message",c.state.username,c.state.message,function(e){t.date=Date.now(),c.handleMessage(t)}),c.setState({message:""})},c.state={username:"",message:"",messages:[],owner:""},c.handleInputChange=c.handleInputChange.bind(c);var t=window.location.port;return c.socket=io.connect("http://"+window.location.hostname+(t?":"+t:"")+"/chat"),c.socket.on("receive message",c.handleMessage),c.connectMessage(),c}return _inherits(a,React.Component),_createClass(a,[{key:"render",value:function(){return React.createElement("div",{className:"msg-box"},this.loginDialog(),React.createElement("div",{className:"uk-margin"},this.messageBox()),React.createElement("div",null,React.createElement("input",{className:"uk-input",type:"text",placeholder:"To",name:"username",onChange:this.handleInputChange,value:this.state.username}),React.createElement("textarea",{className:"uk-textarea uk-margin",onChange:this.handleInputChange,placeholder:"Message",name:"message",value:this.state.message})),React.createElement("button",{onClick:this.sendMessage,className:"uk-button uk-button-primary"},"Send"))}}]),a}(),SpyfallTimer=function(e){function s(e){_classCallCheck(this,s);var t=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));t.radius=0,t.componentDidMount=function(){t.radius=t.props.radius,t.setupTick()},t.componentDidUpdate=function(){t.lastStarted==t.props.started&&t.lastLength==t.props.length||t.setupTick()},t.setupTick=function(){t.lastStarted=t.props.started,t.lastLength=t.props.length,t.circumference=2*Math.PI*t.props.radius,t.tick()},t.tick=function(){t.count=Math.floor((Date.parse(t.props.started)-Date.now())/t.props.interval)+t.props.length,0<t.count&&setTimeout(t.tick,t.props.interval),t.update()},t.update=function(){var e=t.props.length-t.count;$("#spyfall-timer-sector-"+t.props.key).css("stroke-dasharray",e*t.circumference/t.props.length+" "+t.circumference),$("#spyfall-timer-text-"+t.props.key).html(0<t.count?t.count:0)},t.props=e,t.count=0;var a=t;return $(window).resize(function(){a.forceUpdate()}),t}return _inherits(s,React.Component),_createClass(s,[{key:"render",value:function(){var e=640<window.innerWidth?this.props.radius:.5*this.props.radius,t=e+e,a=t+t;return React.createElement("div",{className:"spyfall-timer-wrap"},React.createElement("svg",{className:"spyfall-timer-circle",width:a,height:a},React.createElement("circle",{className:"spyfall-timer-sector",id:"spyfall-timer-sector-"+this.props.key,style:{strokeWidth:.8*t},r:e,cx:t,cy:t})),React.createElement("span",{className:"spyfall-timer-text",id:"spyfall-timer-text-"+this.props.key,style:{top:t+"px",left:t+"px"}}))}}]),s}(),SpyfallMessageBox=function(e){function t(e){_classCallCheck(this,t);var c=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return c.lastMessagesLength=0,c.lastType="",c.componentDidMount=function(){var e=$("#spyfall-message-"+c.props.key),t=$("#spyfall-message-box-"+c.props.key);e.scrollTop(t.outerHeight()-e.height()),c.lastMessagesLength=c.props.messages.length,c.lastType=c.props.type},c.componentDidUpdate=function(e,t){if(c.lastMessagesLength!=c.props.messages.length||c.lastType!=c.props.type){var a=$("#spyfall-message-"+c.props.key),s=$("#spyfall-message-box-"+c.props.key);a.animate({scrollTop:s.outerHeight()-a.height()},1e3)}},c.qaBox=function(){for(var e=[],t=0;t<c.props.messages.length;t++){var a=c.props.messages[t],s=a.fromUsername==c.props.username?"You":a.fromUsername,n=a.toUsername==c.props.username?"You":a.toUsername;e.push(React.createElement("div",{className:"game-qa-talk uk-margin-medium-bottom",key:"qa-"+t},React.createElement("div",{className:"uk-margin-small-bottom uk-label"},s," asked ",n),React.createElement("div",null,React.createElement("div",{className:"game-talk game-talk-q uk-margin-small-bottom"},a.question)),React.createElement("div",null,React.createElement("div",{className:"game-talk game-talk-a"},a.answer?a.answer:"..."))))}return 0==e.length&&e.push("No Messages :'("),e},c.discussBox=function(){for(var e=[],t=0;t<c.props.messages.length;t++){var a=c.props.messages[t],s=a.fromUsername!=c.props.username,n="msg-outbound",o="",r="";s&&(n="msg-inbound",o="From: "+a.fromUsername,r=React.createElement("span",{className:"uk-label uk-margin-small-left uk-margin-small-right"},o)),e.push(React.createElement("div",{className:n,key:"discuss-"+t},React.createElement("div",{className:"msg-wrapper uk-margin-small-top"},a.message),s&&r))}return 0==e.length&&e.push("No Messages :'("),e},c}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this.props.title?this.props.title:"Q & A";return React.createElement("div",{id:"spyfall-message-box-"+this.props.key,className:"game-messages uk-card uk-card-body uk-card-secondary uk-card-hover uk-text-center type-"+this.props.type},React.createElement("div",{className:"uk-margin-bottom uk-text-bold"},e),"qa"==this.props.type?this.qaBox():this.discussBox())}}]),t}(),SpyfallProfilesBox=function(e){function t(e){_classCallCheck(this,t);var m=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return m.componentDidUpdate=function(e,t){var a=$("#spyfall-user-"+m.props.update);a.hasClass("show")&&a.removeClass("show"),a.toggleClass("show",200,"easeOutSine")},m.createBox=function(){for(var e=[],t=m.props.players,a=Object.keys(t),s=0;s<a.length;s++){var n=a[s],o=t[n],r=n?(n.charAt(0)+"").toUpperCase():"_",c=memoji[o.reaction],l=twemoji.parse(c||memoji[0],{size:72}),i=n==m.props.username,u=o.connected;e.push(React.createElement("div",{className:"player-profile uk-text-center",key:n,"data-username":n},React.createElement("div",{className:"player-avatar"+(i?" player-user":"")+(u?" connected":"")},React.createElement("div",{className:"player-label"},r)),React.createElement("div",{"uk-drop":"pos: right-center"},React.createElement("div",{className:"uk-card uk-card-body uk-card-default"},!i&&React.createElement("div",{className:"player-meta uk-margin-small-bottom"},React.createElement("div",{className:"uk-text-meta"},"Player Username"),React.createElement("div",{className:"uk-text-lead uk-text-bold"},n)),!m.props.open&&React.createElement("div",null,React.createElement("div",{className:"uk-text-meta"},i?"Your":"Player"," Score"),React.createElement("div",{className:"uk-text-lead uk-text-bold"},o.score)),i&&React.createElement("div",{className:"uk-flex uk-flex-center uk-flex-wrap"},m.props.reactButtons))),React.createElement("div",{id:"spyfall-user-"+n,className:"player-reaction",dangerouslySetInnerHTML:{__html:l}})))}return e},m}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){return this.createBox()}}]),t}(),SpyfallGameBox=function(e){function t(e){_classCallCheck(this,t);var f=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return f.establish=function(){if(f.socket&&f.socket.socket)f.socket.socket.connect();else{var e=window.location.port;f.socket=io.connect("http://"+window.location.hostname+(e?":"+e:"")+"/game")}},f.createReactionModule=function(){for(var t=[],e=function(){var e=a;t.push(React.createElement("button",{className:"uk-button uk-button-default uk-button-small",onClick:function(){return f.reactGame(e)},key:"emoji-"+a,dangerouslySetInnerHTML:{__html:twemoji.parse(memoji[a])}}))},a=0;a<memoji.length;a++)e();f.reactButtons=t},f.displayError=function(e){console.log(e),e?UIkit.notification({message:e.message?e.message:"Server did not accept inputs.",pos:"top-center"}):UIkit.notification({message:"Server denied your request."})},f.socketHandlers=function(){f.socket.on("round_start game",function(e){f.setState({asked:!1,discussion:[],game:{role:"",location:""},hasAccused:[],initiated:!1,input:!1,messages:[],number:f.state.number+1,phase:0,spyGuessed:!1,timerDelta:0,timerStarted:e,timeoutStarted:e,victory:null,votedBy:"",votes:{},votingFor:""})}),f.socket.on("question_asked game",function(e){var t=f.state.messages.concat(e);f.setState({messages:t})}),f.socket.on("answer_replied game",function(e){if(f.state.messages){var t=f.state.messages.length;f.state.messages[t-1].answer=e.answer,f.setState({messages:f.state.messages})}}),f.socket.on("reacted game",function(e,t){f.state.players[e].reaction=t,f.setState({players:f.state.players,updateEmoji:e})}),f.socket.on("player_joined game",function(e){f.state.players[e]={score:0,reaction:0},f.setState({players:f.state.players})}),f.socket.on("started game",function(){f.setState({open:!1})}),f.socket.on("initiated game",function(e){e&&f.setState({spyGuessed:!0})}),f.socket.on("change_phase game",function(e){f.setState({phase:e})}),f.socket.on("ended game",function(){console.log("DIE")}),f.socket.on("force_reload game",function(){f.connectGame()}),f.socket.on("update_players game",function(e){f.setState({players:e})}),f.socket.on("votes_succeed game",function(){f.setState({votedBy:"",votingFor:"",votes:{}})}),f.socket.on("votes_failed game",function(){f.setState({votedBy:"",votingFor:"",votes:{}})}),f.socket.on("has_voted game",function(e,t){var a=f.state.votes;a[e]=t,f.setState({votes:a})}),f.socket.on("take_votes game",function(e,t,a){console.log(a),f.setState({timeoutStarted:a,votedBy:e,votingFor:t,votes:{}})}),f.socket.on("take_question game",function(e,t){console.log("hey"),console.log(t),f.setState({timeoutStarted:t,input:e,asked:!1})}),f.socket.on("take_answer game",function(e,t){console.log("answer"),console.log(t),f.setState({timeoutStarted:t,input:e,asked:!0})}),f.socket.on("round_end game",function(e,t,a,s){var n=f.state.game;n.endgame={spy:t,location:e,roles:a},f.setState({game:n,victory:s})}),f.socket.on("discussed game",function(e,t){f.state.discussion.push({fromUsername:e,message:t}),f.setState({discussion:f.state.discussion})}),f.socket.on("is_waiting game",function(e){f.setState({timeoutStarted:e})}),f.socket.on("user_connected game",function(e){console.log(e,"connected"),f.state.players[e].connected=!0,f.setState({players:f.state.players})}),f.socket.on("user_disconnected game",function(e){f.state.players[e].connected=!1,f.setState({players:f.state.players})}),f.socket.on("give_role game",function(e){console.log(e),f.setState({game:e})}),f.socket.on("take_location game",function(){console.log("Timer Running")}),f.socket.on("take_suspicion game",function(){f.setState({votedBy:f.state.username})})},f.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;f.setState(_defineProperty({},s,a))},f.handleLocationPick=function(e){if(2!=f.state.phase||"spy"!=f.state.game.role)return!1;console.log("Check Loc: "+e),f.socket.emit("location game",f.state.roomcode,e,function(e){console.log("Location Correct: "+e)})},f.reactGame=function(a){f.socket.emit("react game",f.state.roomcode,a,function(e){if(1!=e)return f.displayError(e);var t=f.state.players;f.state.players[f.state.username].reaction=a,f.setState({players:t,updateEmoji:f.state.username})})},f.startGame=function(){var e=f.state.roomcode+"";f.socket.emit("start game",e,function(e){if(1!=e)return f.displayError(e);f.setState({open:!1})})},f.newGame=function(){var e=f.state.roomcode+"";f.socket.emit("new game",e,function(e){if(1!=e)return f.displayError(e)})},f.connectGame=function(){var t=f.state.roomcode+"";f.socket.emit("load game",t,function(e){if(0==e)return f.displayError(e);console.log(e),f.setState(e),f.socket.emit("open game",t,function(e){if(1!=e)return f.displayError(e);f.setState({connected:!0})})})},f.closeGame=function(){},f.initiateGame=function(){var e=f.state.roomcode+"";f.socket.emit("initiate game",e,function(e){if(1!=e)return f.displayError(e);f.setState({initiated:!0})})},f.suspectGame=function(){var e=f.state.roomcode+"";f.socket.emit("suspect game",e,f.state.votingFor,function(e){if(1!=e)return f.displayError(e)})},f.voteGame=function(e){var t=f.state.roomcode+"";f.socket.emit("vote game",t,e,function(e){if(1!=e)return f.displayError(e)})},f.discussGame=function(){var e=f.state.roomcode+"",t=f.state.text;f.socket.emit("discuss game",e,t,function(e){if(1!=e)return f.displayError(e);f.state.discussion.push({fromUsername:f.state.username,message:t}),f.setState({discussion:f.state.discussion,text:""})})},f.sendQuery=function(){if(f.state.input===f.state.username){var e=f.state.roomcode+"";if(f.state.asked){var s=f.state.text+"";s&&f.socket.emit("answer game",e,s,function(e){if(1!=e)return f.displayError(e);var t=f.state.messages.length;if(!0===e&&0!=t){var a=f.state.messages.length;f.state.messages[a-1].answer=s,f.setState({messages:f.state.messages,text:""})}})}else{var n=f.state.text+"",o=f.state.target;n&&f.socket.emit("question game",e,o,n,function(e){if(1!=e)return f.displayError(e);var t={fromUsername:f.state.username,toUsername:o,question:n,answer:null},a=f.state.messages.concat(t);f.setState({messages:a,input:null,text:""})})}}},f.targetBox=function(){var e=[],t=null;if(3!=f.state.phase){var a=f.state.messages;0!=a.length&&(t=a[a.length-1].fromUsername)}for(var s=Object.keys(f.state.players),n=0;n<s.length;n++){var o=s[n];o!=f.state.username&&o!=t&&e.push(React.createElement("option",{key:o,value:o},o))}var r=3==f.state.phase;return React.createElement("select",{className:"uk-select",name:r?"votingFor":"target",onChange:f.handleInputChange,value:r?f.state.votingFor:f.state.target},React.createElement("option",null,"-- Select One --"),e)},f.inputBox=function(){var e=f.state.phase,t={normal:0==e,voting:3==e,finding:2==e&&"spy"==f.state.game.role,setvote:3==e&&f.state.votedBy==f.state.username,questioning:0==e&&f.state.input==f.state.username&&!f.state.asked,asked:f.state.asked,discuss:4==e||1==e,discussvoting:4==e&&f.state.votingFor,queried:0==e&&f.state.input==f.state.username,compliance:4==e&&f.state.username!=f.state.votingFor&&f.state.username!=f.state.votedBy};return React.createElement("div",{className:"game-input-box uk-margin-top"},(t.normal||t.setvote)&&React.createElement("div",{className:"uk-padding-small"},React.createElement("b",null,t.setvote||t.queried?"You":t.normal?f.state.input:"Someone")," will ",React.createElement("b",null,t.setvote?"vote":t.asked?"answer":"question"),"."),t.discussvoting&&React.createElement("div",null,React.createElement("b",null,f.state.votedBy)," accuses ",React.createElement("b",null,f.state.votingFor)," as the Spy!"),(t.setvote||t.questioning)&&f.targetBox(),(t.queried||t.discuss)&&React.createElement("input",{className:"uk-input uk-margin-small-top uk-margin-small-bottom",type:"text",name:"text",onChange:f.handleInputChange,value:f.state.text,placeholder:t.queried?t.asked?"Answer":"Question":"Discuss"}),(t.queried||t.setvote||t.discuss)&&React.createElement("button",{onClick:t.queried?f.sendQuery:t.setvote?f.suspectGame:f.discussGame,className:"uk-button uk-button-secondary uk-margin-small-top uk-margin-small-bottom"},t.queried?t.asked?"Reply":"Ask":t.voting?"Vote":"Send"),t.compliance&&React.createElement("span",{className:"uk-margin-small-top uk-margin-small-bottom uk-display-inline-block"},React.createElement("button",{onClick:function(){f.voteGame(!0)},className:"uk-button uk-button-secondary uk-margin-left"},"Agree"),React.createElement("button",{onClick:function(){f.voteGame(!1)},className:"uk-button uk-button-secondary uk-margin-small-left"},"Disagree")))},f.toggleMessageBox=function(){f.setState({toggleMessages:3<=f.state.toggleMessages+1?0:f.state.toggleMessages+1})},f.roleBox=function(){var e=[],t=[],a="",s=0,n=1==f.state.phase,o=f.state.username;if(n){if(!f.state.game.endgame)return"";var r=f.state.game.endgame,c=f.state.number<f.state.rounds;if(e.push("Location is the ",React.createElement("i",{key:"role-"+s++},r.location)),t.push(React.createElement("b",{key:"role-"+s++},r.spy)," is the Spy! "),Object.keys(r.roles).forEach(function(e){o==e?t.push("You are"):t.push(React.createElement("b",{key:"role-"+s++},e)," is"),t.push(" the "+r.roles[e]+". ")}),!c){var l;e.push(". "),(l=e).push.apply(l,_toConsumableArray(t)),t=e;for(var i="",u=!1,m=f.state.players,p=Object.keys(m),d=0;d<p.length;d++){var g=p[d];-1<m[g].score?i=g:-1==m[g].score&&(u=!0,i+=" & "+g)}e=[(u||o!=i?i:"You")+" "+(u||o==i?"are":"is")+" the winner!"]}}else{var h="spy"==f.state.game.role,k=!h&&0<=f.state.hasAccused.indexOf(f.state.username);e=["You are the "+(h?"Spy":f.state.game.role)+"!"],t=[h?"":React.createElement("div",{key:"role-"+s++},"The location is the ",f.state.game.location,".")],a=k||0!=f.state.phase?"":React.createElement("button",{className:"uk-button uk-button-primary game-initiate",disabled:f.state.initiated,onClick:f.initiateGame},"Initiate ",h?"Guess":"Suspicion")}return React.createElement("div",{id:"spyfall-role-box-"+f.props.key,className:"spyfall-role-box uk-padding-small",style:{display:"none"}},React.createElement("div",{className:"role-box-card uk-text-left uk-card uk-card-default uk-padding uk-card-body"+(n?" alter":"")},React.createElement("div",{className:"uk-padding-small uk-background-primary uk-light uk-text-center"},React.createElement("h2",{className:"uk-text-bold no-margin"},e),t,React.createElement("br",null),React.createElement("div",{className:"no-margin"},a))))},f.playersBox=function(){var e=f.state.updateEmoji;return f.state.updateEmoji="",React.createElement(SpyfallProfilesBox,{players:f.state.players,open:f.state.open,username:f.state.username,reactButtons:f.reactButtons,update:e})},f.messageBox=function(){var e=0==f.state.toggleMessages&&(0==f.state.phase||3==f.state.phase)||1==f.state.toggleMessages&&(1==f.state.phase||4==f.state.phase)||2==f.state.toggleMessages&&2==f.state.phase,t=0==f.state.toggleMessages&&(1==f.state.phase||4==f.state.phase)||1==f.state.toggleMessages&&(0==f.state.phase||2==f.state.phase||3==f.state.phase),a=(2==f.state.toggleMessages||0==f.state.toggleMessages&&f.state.phase,"");if(e&&f.state.messages)a=React.createElement(SpyfallMessageBox,{className:"grow-h game-box",username:f.state.username,messages:f.state.messages,type:"qa",title:"Q & A"});else if(t)a=React.createElement(SpyfallMessageBox,{className:"grow-h game-box",username:f.state.username,messages:f.state.discussion,type:"discuss",title:"Discussion"});else{for(var s=[],n=f.state.locations,o="spy"==f.state.game.role,r=function(){var e=n[c],t=e==f.state.game.location;s.push(React.createElement("span",{key:"location-"+e},React.createElement("button",{onClick:function(){return f.handleLocationPick(e)},disabled:!o&&!t,"data-location":e,className:"uk-button uk-button-small uk-button-primary"},e))),s.push(" ")},c=0;c<n.length;c++)r();a=React.createElement("div",{className:"grow-h uk-text-center uk-text-break game-locations uk-padding"},React.createElement("h2",null,"Locations"),s)}return a},f.showMenu=function(){UIkit.offcanvas($("#offcanvas-overlay")).show()},f.toggleRoleBox=function(){var e=$("#spyfall-role-box-"+f.props.key),t=$("#spyfall-role-toggle"+f.props.key);e.hasClass("show")?(t.removeClass("uk-active"),e.removeClass("show").one("transitionend",function(){return e.css("display","none")})):(t.addClass("uk-active"),e.show().addClass("show"))},f.state={console:null,connected:!1,roomcode:"",target:"",text:"",updateEmoji:"",toggleMessages:0,asked:!0,deck:"",discussion:[],game:{role:"",location:""},hasAccused:[],initiated:!1,input:!1,locations:[],master:!1,messages:[],number:0,open:!0,phase:0,players:{},roundLength:540,rounds:8,spyGuessed:!1,timerStarted:"",timerDelta:0,timeoutStarted:null,timeoutLength:30,username:"",victory:null,votedBy:"",votes:{},votingFor:""},document.addEventListener("keydown",function(e){13!=e.keyCode&&13!=e.which||!e.altKey||toggleFullscreen()},!1),$(window).focus(function(){f.socket.disconnected&&f.state.roomcode&&(f.establish(),f.connectGame())}),f.handleInputChange=f.handleInputChange.bind(f),f.handleLocationPick=f.handleLocationPick.bind(f),f.establish(),f.socketHandlers(),f.createReactionModule(),f}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"game-box grow-h uk-padding uk-padding-remove-horizontal"},this.state.connected?React.createElement("div",{className:"game-box grow"},React.createElement("div",{className:"player-box"},React.createElement("div",{className:"",key:"menu"},React.createElement("a",{className:"menu-button",onClick:this.showMenu},React.createElement("span",{className:"menu-button-label","uk-icon":"icon: menu; ratio: 1.5"}))),this.playersBox()),React.createElement("div",{className:"game-box grow dir-c uk-margin-left"},!this.state.open&&React.createElement("div",{className:"uk-margin-small-bottom"},React.createElement("b",null,"SPYFALL.CHAT"),React.createElement("div",{className:"uk-align-right no-margin"},React.createElement("a",{id:"spyfall-role-toggle-"+this.props.key,className:"uk-link-heading",onClick:this.toggleRoleBox},React.createElement("span",{className:"menu-icon","uk-icon":"icon: location; ratio: 1.5"})),"  |  ",React.createElement("a",{className:"uk-link-heading",onClick:toggleFullscreen},React.createElement("span",{className:"menu-icon","uk-icon":"icon: tv; ratio: 1.5"})),"  |  ",React.createElement("a",{className:"uk-link-heading",onClick:this.toggleMessageBox},React.createElement("span",{className:"menu-icon","uk-icon":"icon: copy; ratio: 1.5"})))),React.createElement("div",{className:"game-box dir-c uk-position-relative"},!this.state.open&&this.roleBox(),!this.state.open&&React.createElement("div",{className:"game-box grow dir-c uk-position-relative"},React.createElement("div",{className:"spyfall-timer-position-wrap"},React.createElement(SpyfallTimer,{radius:25,interval:1e3,length:this.state.timeoutLength,started:this.state.timeoutStarted})),React.createElement("div",{id:"spyfall-message-"+this.props.key,className:"game-box dir-c grow scroll"},this.messageBox()),this.inputBox()),this.state.master&&(this.state.open||1==this.state.phase)&&React.createElement("button",{onClick:this.state.number<this.state.rounds?0==this.state.number?this.startGame:this.newGame:this.closeGame,className:"uk-button "+(this.state.number<this.state.rounds?"uk-button-primary":"uk-button-danger")},this.state.number<this.state.rounds?0==this.state.number?"Start":"Proceed":"Close"),React.createElement("div",{className:"uk-text-right uk-text-meta uk-margin-small"},"User: ",React.createElement("code",null,this.state.username)," | Room: ",React.createElement("code",null,this.state.roomcode))))):React.createElement("div",{className:"game-box dir-c grow-w"},React.createElement("div",{className:"",key:"menu"},React.createElement("a",{className:"menu-button",onClick:this.showMenu},React.createElement("span",{className:"menu-button-label","uk-icon":"icon: menu; ratio: 1.5"}))),React.createElement("input",{className:"uk-input uk-margin",type:"text",onChange:this.handleInputChange,placeholder:"Room Code",name:"roomcode",value:this.state.roomcode}),React.createElement("button",{onClick:this.connectGame,className:"uk-button uk-button-primary"},"Connect")))}}]),t}();
//# sourceMappingURL=client-components.js.map