"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),memoji=["😑","😀","😗","😍","🧐","🤓"],MessageBox=function(e){function a(e){_classCallCheck(this,a);var c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));c.setOwner=function(e){c.setState({owner:e})},c.handleMessage=function(e){var t=c.state.messages.concat(e);c.setState({messages:t})},c.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;c.setState(_defineProperty({},n,a))},c.messageBox=function(){var e=[];if(c.state.messages)for(var t=0;t<c.state.messages.length;t++){var a=c.state.messages[t],n=a.to==c.state.owner,s="msg-outbound",r="To: "+a.to;n&&(s="msg-inbound",r="From: "+a.from);var o=React.createElement("span",{className:"uk-label uk-margin-small-left uk-margin-small-right"},r);e.push(React.createElement("div",{className:s,key:t},n?"":o,React.createElement("div",{className:"msg-wrapper uk-margin-small-top"},a.text),n?o:""))}return e},c.loginDialog=function(){var e=React.createElement("div",{className:"uk-alert-danger uk-padding","uk-alert":!0},React.createElement("a",{className:"uk-alert-close","uk-close":!0}),"You still need to ",React.createElement("a",{className:"uk-link-reset",href:"/signin"},React.createElement("u",null,"login")),"."),t=React.createElement("span",{className:"uk-label"},"Logged in as ",c.state.owner);return null===c.state.owner?e:t},c.connectMessage=function(){c.socket.emit("open message",c.setOwner)},c.sendMessage=function(){var t={event:0,from:c.state.owner,to:c.state.username,text:c.state.message,date:null};c.socket.emit("send message",c.state.username,c.state.message,function(e){t.date=Date.now(),c.handleMessage(t)}),c.setState({message:""})},c.state={username:"",message:"",messages:[],owner:""},c.handleInputChange=c.handleInputChange.bind(c);var t=window.location.port;return c.socket=io.connect("http://"+window.location.hostname+(t?":"+t:"")+"/chat"),c.socket.on("receive message",c.handleMessage),c.connectMessage(),c}return _inherits(a,React.Component),_createClass(a,[{key:"render",value:function(){return React.createElement("div",{className:"msg-box"},this.loginDialog(),React.createElement("div",{id:"msg",className:"uk-margin"},this.messageBox()),React.createElement("div",null,React.createElement("input",{className:"uk-input",type:"text",placeholder:"To",name:"username",onChange:this.handleInputChange,value:this.state.username}),React.createElement("textarea",{className:"uk-textarea uk-margin",id:"message",onChange:this.handleInputChange,placeholder:"Message",name:"message",value:this.state.message})),React.createElement("button",{onClick:this.sendMessage,className:"uk-button uk-button-primary"},"Send"))}}]),a}(),SpyfallGameBox=function(e){function a(e){_classCallCheck(this,a);var l=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));l.createReactionModule=function(){for(var t=[],e=function(){var e=a;t.push(React.createElement("button",{className:"uk-button uk-button-default uk-button-small",onClick:function(){return l.reactGame(e)},key:"emoji-"+a,dangerouslySetInnerHTML:{__html:twemoji.parse(memoji[a])}}))},a=0;a<memoji.length;a++)e();l.reactButtons=t},l.socketHandlers=function(){l.socket.on("round_start game",function(e){l.setState({timerStarted:e})}),l.socket.on("question_asked game",function(e){var t=l.state.messages.concat(e);l.setState({messages:t})}),l.socket.on("answer_replied game",function(e){if(l.state.messages){var t=l.state.messages.length;l.state.messages[t-1].answer=e.answer,l.setState({messages:l.state.messages})}}),l.socket.on("reacted game",function(e,t){for(var a=0;a<l.state.players.length;a++)l.state.players[a].username==e&&(l.state.players[a].reaction=t||0);l.setState({players:l.state.players})}),l.socket.on("player_joined game",function(e){var t=l.state.players.concat({username:e,score:0,reaction:0});l.setState({players:t})}),l.socket.on("started game",function(){l.setState({open:!1})}),l.socket.on("take_question game",function(){console.log("hey"),l.setState({input:!0,asked:!1})}),l.socket.on("take_answer game",function(){console.log("answer"),l.setState({input:!0,asked:!0})}),l.socket.on("give_role game",function(e){console.log(e),l.setState({game:e})}),l.socket.on("take_interrupt game",function(){})},l.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;l.setState(_defineProperty({},n,a))},l.reactGame=function(n){l.socket.emit("react game",l.state.roomcode,n,function(e){if(1==e){for(var t=l.state.players,a=0;a<t.length;a++)t[a].username==l.state.username&&(t[a].reaction=n);l.setState({players:t})}})},l.startGame=function(){var e=l.state.roomcode+"";l.socket.emit("start game",e,function(e){1==e&&l.setState({open:!1})})},l.connectGame=function(){var t=l.state.roomcode+"";l.socket.emit("load game",t,function(e){console.log(e),l.setState(e),l.socket.emit("open game",t,function(e){!0===e&&l.setState({connected:!0})})})},l.sendQuery=function(){if(l.state.input){var e=l.state.roomcode+"";if(l.state.asked){var n=l.state.text+"";n&&l.socket.emit("answer game",e,n,function(e){var t=l.state.messages.length;if(!0===e&&0!=t){var a=l.state.messages.length;l.state.messages[a-1].answer=n,l.setState({messages:l.state.messages,text:""})}})}else{var s=l.state.text+"",r=l.state.target;s&&l.socket.emit("question game",e,r,s,function(e){if(!0===e){var t={fromUsername:l.state.username,toUsername:r,question:s,answer:null},a=l.state.messages.concat(t);l.setState({messages:a,input:!1,text:""})}})}}},l.targetBox=function(){for(var e=[],t=0;t<l.state.players.length;t++){var a=l.state.players[t];a.username!=l.state.username&&e.push(React.createElement("option",{key:a.username,value:a.username},a.username))}return React.createElement("select",{className:"uk-select",name:"target",onChange:l.handleInputChange,value:l.state.target},React.createElement("option",null,"-- Select One --"),e)},l.inputBox=function(){var e=React.createElement("div",null,"You will ",l.state.asked?"answer":"question",".");return React.createElement("div",null,e,l.state.asked?"":l.targetBox(),React.createElement("input",{className:"uk-input uk-margin",type:"text",name:"text",onChange:l.handleInputChange,value:l.state.text,placeholder:l.state.asked?"Answer":"Question"}),React.createElement("button",{onClick:l.sendQuery,className:"uk-button uk-button-secondary"},l.state.asked?"Reply":"Ask"))},l.roleBox=function(){var e="spy"==l.state.game.role,t=React.createElement("h1",null,"You are the ",e?"Spy":l.state.game.role,"!"),a=React.createElement("div",null,"The location is the ",l.state.game.location,".");return React.createElement("div",{className:"uk-card uk-card-primary uk-card-body uk-text-center uk-margin-top"},t,e?"":a)},l.playersBox=function(){for(var e=[],t=l.state.players,a=0;a<t.length;a++){var n=t[a],s=(n.username&&n.username,(n.username.charAt(0)+"").toUpperCase()),r=memoji[n.reaction],o=twemoji.parse(r||memoji[0],{size:72}),c=t[a].username==l.state.username;e.push(React.createElement("div",{className:"player-profile uk-text-center uk-display-inline-block",key:n.username,"data-username":n.username},React.createElement("div",{className:"player-avatar"+(c?" player-user":"")},React.createElement("div",{className:"player-label"},s)),React.createElement("div",{"uk-drop":"pos: bottom-center"},React.createElement("div",{className:"uk-card uk-card-body uk-card-default"},!c&&React.createElement("div",{className:"player-meta uk-margin-small-bottom"},React.createElement("div",{className:"uk-text-meta"},"Player Username"),React.createElement("div",{className:"uk-text-lead uk-text-bold"},n.username)),!l.state.open&&React.createElement("div",null,React.createElement("div",{className:"uk-text-meta"},c?"Your":"Player"," Score"),React.createElement("div",{className:"uk-text-lead uk-text-bold"},n.score)),c&&React.createElement("div",{className:"uk-flex uk-flex-center uk-flex-wrap"},l.reactButtons))),React.createElement("div",{className:"player-reaction",dangerouslySetInnerHTML:{__html:o}})))}return React.createElement("div",{className:"player-box uk-flex uk-flex-center"},e)},l.messageBox=function(){var e=[];if(l.state.messages)for(var t=0;t<l.state.messages.length;t++){var a=l.state.messages[t],n=a.fromUsername==l.state.username?"You":a.fromUsername,s=a.toUsername==l.state.username?"You":a.toUsername;e.push(React.createElement("div",{className:"game-qa-talk uk-margin-medium-bottom",key:"qa-"+t},React.createElement("div",{className:"uk-margin-small-bottom uk-label"},n," asked ",s),React.createElement("div",null,React.createElement("div",{className:"game-talk game-talk-q uk-margin-small-bottom"},a.question)),React.createElement("div",null,React.createElement("div",{className:"game-talk game-talk-a"},a.answer?a.answer:"..."))))}return React.createElement("div",{className:"uk-card uk-card-body uk-card-secondary uk-card-hover uk-text-center"}," ",0!=e.length?e:"No Messages :'("," ")},l.state={connected:!1,roomcode:"",target:"",text:"",discuss:!1,voting:!1,input:!1,asked:!0,game:{role:"",location:""},open:!0,number:"",rounds:"",username:"",roundLength:"",timerStarted:"",players:[],messages:[],guessed:!1,master:!1,suspicious:[],deck:""},l.handleInputChange=l.handleInputChange.bind(l);var t=window.location.port;return l.socket=io.connect("http://"+window.location.hostname+(t?":"+t:"")+"/game"),l.socketHandlers(),l.createReactionModule(),l}return _inherits(a,React.Component),_createClass(a,[{key:"render",value:function(){return React.createElement("div",{className:"game uk-padding uk-padding-remove-horizontal"},React.createElement("div",{className:"game-box"},this.state.connected?React.createElement("div",null,this.playersBox(),this.state.master&&this.state.open&&React.createElement("button",{onClick:this.startGame,className:"uk-button uk-button-primary"},"Temp Start Button"),!this.state.open&&React.createElement("div",null,this.roleBox(),React.createElement("div",{className:"uk-margin game-qa"},this.messageBox()," "),this.state.input?this.inputBox():""),React.createElement("div",{className:"uk-text-right uk-text-meta"},"User: ",React.createElement("code",null,this.state.username)," | Room: ",React.createElement("code",null,this.state.roomcode))):React.createElement("div",null,React.createElement("input",{className:"uk-input uk-margin",type:"text",id:"roomcode",onChange:this.handleInputChange,placeholder:"Room Code",name:"roomcode",value:this.state.roomcode}),React.createElement("button",{onClick:this.connectGame,className:"uk-button uk-button-primary"},"Connect"))))}}]),a}();
//# sourceMappingURL=client-components.js.map